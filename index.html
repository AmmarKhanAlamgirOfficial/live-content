---
layout: default
---
<!-- Add CSS Reset to prevent framework conflicts -->
<style>
  /* CSS Reset for embeds */
  .post-body iframe,
  .post-body blockquote,
  .post-body .twitter-tweet,
  .post-body .instagram-media,
  .post-body .fb-post,
  .post-body .tiktok-embed {
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    display: block !important;
  }
  
  /* Remove any default spacing from embed wrappers */
  .embed-container,
  .youtube-embed,
  .twitter-embed,
  .instagram-embed,
  .facebook-embed,
  .tiktok-embed {
    margin: 0 !important;
    padding: 0 !important;
    line-height: 0 !important;
  }
</style>

<div class="live-container">
    <header class="live-header">
        <h1 class="text-4xl font-extrabold text-gray-800">Live News Archive</h1>
    </header>

    <div id="live-feed">
        {% for post in site.posts %}
        <div class="live-post" id="post-{{ post.id | slugify }}">
            <div class="live-post-content">
                <div class="live-post-meta">
                    <div class="live-post-author-group">
                        <svg class="post-author-logo" viewBox="0 0 200 200" aria-hidden="true"><rect x="50" y="50" width="100" height="100" class="square"/><text x="50%" y="50%" text-anchor="middle" dy=".3em" class="tmp-text">TMP</text><circle cx="100" cy="100" r="80" fill="none" stroke-width="2" class="rotating-circle"/></svg>
                        <span class="live-post-author">By {{ post.author_name | default: "Live Team" }}</span>
                    </div>
                    <span class="live-post-time">{{ post.timestamp | date: "%B %d, %Y %I:%M %p" }}</span>
                </div>
                <h2 class="live-post-headline">{{ post.headline }}</h2>
                {% if post.tags.size > 0 %}
                <div class="tags-container">
                    {% for tag in post.tags %}
                    <span class="tag-badge">#{{ tag }}</span>
                    {% endfor %}
                </div>
                {% endif %}

                <!-- REMOVED pt-4 class that was causing top gap -->
                <div class="post-body" data-raw-content="{{ post.content | escape }}">
                    <!-- Content will be loaded by embed.js -->
                </div>

                <div class="post-footer">
                    <button class="share-btn" data-post-id="{{ post.id | slugify }}" data-post-headline="{{ post.headline | escape }}">
                        <i class="fas fa-share-alt"></i>
                        <span>Share</span>
                    </button>
                </div>

            </div>
        </div>
        {% endfor %}
    </div>

    <div id="feed-controls">
        <button id="load-more-btn" class="professional-btn">Load More</button>
        <p id="no-more-posts-msg" style="display: none;">This is the end.</p>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const postsPerLoad = 50;
        let visiblePosts = 0;
        const allPosts = document.querySelectorAll('.live-post');
        const loadMoreBtn = document.getElementById('load-more-btn');
        const noMorePostsMsg = document.getElementById('no-more-posts-msg');

        function loadPosts() {
            const nextBatch = visiblePosts + postsPerLoad;
            for (let i = visiblePosts; i < nextBatch && i < allPosts.length; i++) {
                allPosts[i].style.display = 'block';
            }
            visiblePosts = nextBatch;

            if (visiblePosts >= allPosts.length) {
                loadMoreBtn.style.display = 'none';
                noMorePostsMsg.style.display = 'block';
            }
        }

        loadPosts();

        loadMoreBtn.addEventListener('click', loadPosts);

        const shareHandler = (e) => {
            const shareBtn = e.target.closest('.share-btn');
            if (shareBtn) {
                const postId = shareBtn.dataset.postId;
                const postHeadline = shareBtn.dataset.postHeadline;
                const postUrl = `${window.location.origin}${window.location.pathname}#post-${postId}`;
                const shareText = `Archived Post: ${postHeadline}`;

                if (navigator.share) {
                    navigator.share({
                        title: postHeadline,
                        text: shareText,
                        url: postUrl
                    });
                } else {
                    alert(`Share this link:\n${postUrl}`);
                }
            }
        };

        const liveContainer = document.querySelector('.live-container');
        if (liveContainer) {
            liveContainer.addEventListener('click', shareHandler);
        }

        // Force remove gaps after page load
        setTimeout(() => {
            // Remove gaps from all embeds
            document.querySelectorAll('.post-body iframe, .post-body blockquote').forEach(el => {
                el.style.margin = '0 !important';
                el.style.padding = '0 !important';
                el.style.border = 'none !important';
                el.style.display = 'block !important';
            });
        }, 1000);
    });
</script>
